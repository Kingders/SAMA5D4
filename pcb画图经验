以下操作全部操作在AD14

pcb设计经验
线与线之间间隔 >0.254mm 可以跑 80 mhz 高速线路不受干扰
VCC GND 线 一般 至少 0.5mm ~ 1mm
铺铜:
	间距大于 0.254mm
	(二层版)铺铜一般接地, 空白的铜层区要补充大量过孔,减少额外阻抗
	pour over all same net object 选项表示 铺铜层覆盖掉 GND 线 如果 铺铜层接地
	remove dead copper (去死铜)表示 如果 铺铜层接地 则一些不能接地的孤立的小区域铺铜层会被去掉
过孔时的工艺是 hole > 0.3mm,diameter > 0.6mm 中间通孔 hole 的越大 通过的电流的面积越大!!!
供电模块要经可能靠近 重点的负载,避免太远传输带来的噪波
并排线功能布线,要求并排线的长度几乎相同,不要出现某些过长的情况
修改原理图 update 到 pcb 
电阻电容,不要要轻易从中间过线!!!


重点图层(基于二层版):
top_layer: 表面铜层
bottom_layer: 底部铜层
top_overlay: 表面丝印层 就是绝缘绿油层上的 字符标记层
bottom_overlayer: 底部丝印层 也是底部绝缘绿油层外的 字符标记层
mechanical: 物理层,一般删掉不需要!!!
top_paste: 表面锡膏图层,标出涂锡膏的位置,加工成涂锡膏工装,用于涂锡膏,过热焊机
top_paste: 底部锡膏图层,标出涂锡膏的位置,加工成涂锡膏工装,用于涂锡膏,过热焊机
top_solder: 表面绝缘绿油层,标出 不涂 绝缘绿油的位置,露出铜层来焊接元器件
bottom_solder: 底部绝缘绿油层,标出 不涂 绝缘绿油的位置,露出铜层来焊接元器件
keepoutlayer: 裁切线层,用于裁切pcb的标记线层

pcb软件技巧:
正在布线/排线中:
	*键,加过孔,
	tab键,转到布线属性,快速即时修改布线参数
非布线情况下:
	U + C 选择某 net ,删掉该 net 已经布好的线
	*键,快速切换 top_layer 和 bottom_layer 
修改了原理图,要 update 到 pcb 时. 先execute changes 再Validate changes ,不然出错
	因为修改后,先要添加变化到pcb图,再分析pcb图
其他:
	当update

find similar objects 的用法! 
	shift+f -> 选某网络某点,弹出的窗口 net 选 same  下面选select matched
布完pcb一定要分析有没有出错:
	Tools->Design rule check...->Run design rule check 但不一定检查到是否漏布线	
	特别是检查画线是不是都连上了!!!!
	Reports -> Board information -> Report -> Routing information 打勾 -> Report
	但是这个只是 显示 有多少个没连上,不能具体看到哪里没连上!!!


输出bom表
reports -> bill of material -> export
注意要设置选项,输出bom表要显示每一颗元器件的参数值
注意按照 元器件的值来区分一项项元器件,把 ALL Columns 里的Value选择并拉到 group columns
	

误关各种类型的消息框,重开方法:软件右下方System, Design Compiler, Help, SCH, instrument项找到打开
屏幕回到原点处 e+j+l(0.0)
画图屏幕坐标显示切换: q 
设计铺铜间距: design -> rules
画线时,按tab键实时修改属性
放via过孔时, 如何选择露出铺铜还是铺上绿油?:via属性 勾选 force complete tenting on top 表示时 顶层铺绿油!!
尺子工具: ctrl+m
快速切换toplayer bottomlayer 层: 小键盘 * 号键
pcb布线,永远不要让布线绕到芯片底部!!

修改添加元件库!!!!!
先添加元件到原理图库 xx.schlib
	注意重点是放pin,
	放pin时,pin的针序号会自动递增,重置数值的方法是,
		停止放新pin,然后双击一根新针把顺便某针里的Displayname和Designator改过来
	Displayname是显示标识
	Designator是原理图与pcb图色联系标记 (designator是像 r1,c1,之类的名称)
	为了按方格距离放置pin或其他什么的,点击菜单栏里栅格图案里的选项设置!!
再添加对应的元件到pcb库 xx.Pcblib
	注意重点是放pad,不用放via,放via一般没有意义!!	
	注意,只要配置好pad 的 designator(与实际和对应原理图元件对应)即可
	另外,配置pad 比较讲究各种层内容,和是否开孔,,,
	放置pad快速技巧: p->p 快捷键后开始放pad, 这时先按tab键,调整pad样式,然后后面放置pad都会按记忆的样式来放!!
	pad面长度要比芯片的针脚长 0.6-0.8mm!!

画电路板:
先建立一项目工程:
添加新原理图,并开始画原理图
	注意,每一个加入的零件都要在其属性(properties...)处
	->Models->add footprint->选择对应的pcb元件
	(在之前应该检查原理图元件的designator,与pcb元件的designator位置关系,以免出错)
添加新pcb图,(与原理图同名)
	菜单栏design->Update PCB Document xxxxx 来到 Engineering Change Order
	-> Excute changes ->Validate changes
	原理图生成pcb图时注意点!!
	每个元器件都有自己的独一无二标识符,即 designator (此designator不同于元件的针口的designator)
	注意,每条网络线net 都连上东西,不能为空,
	


ams1117-1.5 稳压芯片,永远保持vout针与GND/ADJ针为1.5v不变化,而且,GND/ADJ针永远没有电流流过!!!!
	因此除了稳压1.5V外,还可以设计成其他电压的稳压电路例如2.8V



电路设计!!!!
	一般作为输出端的主电源并联10uf 和100nf电容滤波
	而作为输入端的电源针口,也需要并联100nf电容滤波
	有些电源输入端会串联一个电感起保护作用
	高频信号输入针前需要串个电阻,防止高频信号反射,因为反射信号会消耗在串联电阻上,不会返回来影响高频信号输出源!

简单多原理图pcb
	先做一张模块图!! 标出各种对接口 (sheet entrry)
		单线网络的对接口,接口颜色黄色 根据实际标出 接口属性(input,output,等等,)
		包含多个网络的bus对接口,例如各类总线bus对接口,接口颜色蓝色,要标出接口属性harness
	然后在模块上 右键 -> sheet symbol action -> create sheet from sheet symbol 创建对应模块的原理图sheet
		这时,原理图上会预置模块的对接口!!
		画原理图时,吧对应的针口连到对接口即可!!
	注意单线网络的对接口使用:
		例如, a原理图出现 VDDQ 和 VDD 接口,其实都是3.3v的电源接口,但是,在a原理图上不要都接到 标记为3.3v的net网络中去
		而是需要分别 用不同的 net 标记!! 假如两个接口都接到 同一个标记net中,会出错,表示net不能有一个以上的入口!!
		实际这个问题,跟后面谈及的 Duplicate Net Names Wire XXX 问题有关系,这种改法只是权益之计!!
	注意多个网络的bus对接口使用:
		出现Duplicate Net Names Wire XXX 解决办法:
		多张原理图的标识符作用域的设置问题，最简单方法:
		Project -> Project options -> Options -> Net Identifier Scope（网络标识符作用范围）由原来的Automatic改为Global
		随后编译了一下，几十个Duplicate Net Names Wire XXX error全部消失，
		以下是深入内容:
		所以是网络标识符的作用域的问题，这个问题发生在多张原理图设置中.
		Altium Designer中网络标识符的几种方式：
			Automatic、
			Flat、
			Global、
			hierarchical四种方式，
		这四种方式的用法为： 
			（1）设置为Flat方式，不同页之间只有Port（端口）具有全局属性，即在不同的sheet之间进行同名端口的连接。缺点是难于追踪 
			（2）设置为Global方式，不同页之间Port和netlabel都具有全局属性，缺点也是难于追踪。 
			（3）设置为Hierarchical方式，这种适合于分等级的原理图设计中，必须有顶层和底层（每一页），
			     顶层和底层之间是只通过SheetEntry（页入口）和各页的Ports建立对应关系，
			     这种方式适合多页分等级的设计，各页之间的关系比较明晰，也容易追踪。 
			（4）设置为Automatic方式，根据判据自动判断选择上述三种方式中的一种进行设置，
			     具体是这样：当检查到原理图中具有页符号采用Sheet Entry和/或Ports连接子图，则自动选择HIerarchical方式；
			     若没有Sheet Entry则判断有没有Ports，如果有Ports，则采用Flat方式进行设置作用域范围；如果没有Ports，
			     则自动设置为Global方式。
			     也就是说，若采用Automatic方式，当电路图中有SheetEntry时采用Hierarchical方式；
			     当电路图中有Ports（不管不同页之间有没有同名的netlabel）时采用Flat方式；
			     当电路图中仅有Netlabel时才采用Global方式。 
		出现编译错误的原因也就在于Automatic方式时软件采用的判据，如果电路中没有SheetEntry，既有natlabel又有Ports，
			当设置为Automatic时会按照（4）所述的判据自动设置为Flat方式，
			由（1）可知是微微Flat方式只有Port在不同页之间具有全局属性，
			所以软件不认为不同页之间的同名netlabel是连接在一起的，
			进而出现了“Duplicate Net Names Wire XXX”的错误提示，这里边字面意思是网络名重名，
		个人认为出现这种错误时，是设计Altium Designer的人人为设定的，不然的话设计软件的难度太大，
		需要检测有没有netlabel和port，一共有四种情况，况且每一种情况具有包含与被包含的关系。 
		解决办法： 
			（1）将作用域设置为Global方式，这是最简单但比较懒惰的方式，是不同页之间的netlabel和Ports都具有全局属性，
			     然后就可以在不同页之间的同名的Ports之间、同名的Netlabels之间建立连接关系。 
			（2）采用层次原理图设计，顶层的SheetEntry仅仅和子页的Port之间建立连接关系。 
			（3）将不同页之间同名netlabel修改为port，然后通过port建立连接关系，作用域设置为Flat或者Global或Hierarchical。 
			备注：当将出现上述错误信息的原理图工程作用域设置为Hierarchical时，尽管很多错误都消失了，
			但是会有一个“Multiple Top Level Documents”的错误，即多个顶层文档。
	由于多张原理图最终会做到同一块pcb板子上!!所以需要检测各个元器件是否标记相对于pcb是否唯一!!
		例如不要出现同一pcb两个电容都是 C21 标记的情况,即a原理图出现了C21,b原理图就不要再出现用C21标记某电容了
		Reports -> Bill of materials -> 窗口空白处右键 -> Report -> 查看器件表的标记和封装
	然后其实就可以新建一个 与 最上层图(即开始时的模块图)同名的pcb图,然后 update PCB Document xxxx了,
		和单张原理图生pcb的过程没有区别!!


其他:
	按 q 快捷键快速改变单位制度 mil ~ mm
	选中整条网络布线 s+n 后 点击网络线顺便某处!!

漏线检测:
	Reports->Board Informmation->report->routing information->report
	如果看到connections remaining 有数字,表示有露线
	回到pcb l快捷键, hide top layer/buttom layer/top overlay/buttom overlay
	然后就很快看到漏画的线了!!

快捷键：
	pcb上 元器件 批量换层！！  选中一堆元器件 然后移动鼠标，看到元件批量移动时 按 l 批量换层

更改使 pcb 上的元件丝印显示 元件的 Value 参数：
	"原理图"上，shift+f 选择 元器件（电阻/电容），然后点击算选的参数，最后ok 然后 shift+c 解 flitter
	然后就选上了一堆元器件了，
	然后在 Part Comment 处填入 =Value
	update pcb
	在 pcb shift+f 选对应元器件 然后点击算选的参数，最后ok 
	选上了一堆元器件了，	
	在 show comment 处打勾， 所选元器件 丝印显示 元件的 Value 参数


高速，高频电路：
	高速电路
		信号的上升下降沿时间短，可视为高速电路
		信号传输路径大于1/6倍信号波长，可视为高速电路
		信号传输时，严重的趋肤效应，和电离损耗，可视为高速电路
		信号传播延迟大于一半数字信号驱动端的上升时间，可视为高速电路
	信号的频率高，高频电路	
	信号的上升时间：标准1-信号电平从10%-90% 的时间， 标准2-信号电平从20%-80% 的时间
	带宽是：信号（电平）幅度在 70.7%-100% 对应的时间，看作一个周期然后变换成的频率
		由于幅度平方挂钩功率，当信号（电平）幅度低于70.7%时，此刻的功率也低于50%
	信号升降沿陡峭是信号完整性问题的boss  即dV/ds 是关键
	从上升时间延伸出的重点概念：转折频率 fknee = 0.5/上升时间
	所以时钟线clk 信号上升时间越短，高次谐波分量越大（根据傅里也变换）
	带宽对应的时长与 信号上升时间理论上没有关系，但是根据实际经验，可以通过 0.35/（10%-90%）上升时间，得到带宽频率
	地弹：芯片地与电路板地 出现的电位差噪音，主要是芯片地与电路板地的连接存在寄生电感电阻等导致
	阻抗（电容+电阻+电感）：
		传输线物理属性不均匀，每一点的瞬态阻抗都不一样（电流一样，但分摊的电压不一样），
		如果瞬态阻抗都一样，称为该传输线的特性阻抗
		阻抗对信号有影响
		阻抗含有，电容电感这些蓄能属性，在 “高频电信号” 下。
		如果，信号源，传输线，负载，的阻抗不很好适配，当信号传输从源到负载后，信号能量没有完全被消耗掉，
		这时，多余的信号能量会从负载反射回去信号源，发生信号反射，
		反射信号叠加原信号，会破坏信号的完整性，影响信号源，也影响负载的信号采集活动，
		最好的解决办法是在 信号源和负载旁边都串联合适的小电阻，消耗掉反射信号的能量，这方法叫阻抗匹配








电容选取经验:
单位换算:
	1F(法拉)=1000mF(毫法) ，
	1(毫法) =1000uF(微法) ，
	1(微法) =1000nF(纳法) ，
	1(纳法) =1000pF(皮法)。
	还有一个业内规则：单位省略表示为pF，例如
		101(pF)=10 * 10^1 = 100pF = 0.1nF；
		104(pF)=10 * 10^4 = 100000pF = 0.1uF；
		105(pF)=10 * 10^5 = 1000000pF = 1uF。


一直有个疑惑：
	电容感抗是1/jwC，大电容C大，高频时 w也大，阻抗应该很小，不是更适合滤除高频信号？
	然而事实却是：大电容滤除低频信号。
	解答如下：
		一般的10PF左右的电容用来滤除高频的干扰信号,
		0.1UF左右的用来滤除低频的纹波干扰,还可以起到稳压的作用
一般滤波
	如果你PCB上主要工作频率比较低的话，加两个电容就可以了，一个虑除纹波，一个虑除高频信号。
	如果会出现比较大的瞬时电流，建议再加一个比较大的钽电容。
	一般数字电路去耦0.1uF即可，用于10M以下；20M以上用1到10个uF，去除高频噪声好些，
	大概按C=1/f 。旁路一般就比较的小了，一般根据谐振频率一般为0.1或0.01uF

在电路中，
	如果电容起的主要作用是给交流信号提供低阻抗的通路，就称为旁路电容；
	如果主要是为了增加电源和地的交流耦合，减少交流信号对电源的影响，就可以称为去耦电容；
	如果用于滤波电路中，那么又可以称为滤波电容；
	一般统一把这些应用于高速PCB设计中的电容都称为旁路电容.
	原理都是一样的，	
		即利用对交流信号呈现低阻抗的特性，
		这一点可以通过电容的等效阻抗公式看出来：Xcap=1/2лfC，
		工作频率越高，电容值越大则电容的阻抗越小,
		所以理应,电容越大,去高频的能力越好,但实际并不这样!!
除此以外，对于直流电压，
	电容器还可作为电路储能，利用冲放电起到电池的作用。
而实际情况中，
	往往电容的作用是多方面的，我们大可不必花太多的心思考虑如何定义。
高容滤低频,低容滤高频
	电容的本质是通交流，隔直流，
	理论上说电源滤波用电容越大越好。
	但由于引线和PCB布线原因，实际上电容是电感和电容的并联电路，
	还有电容本身的电阻，有时也不可忽略
	这就引入了谐振频率的概念：ω = 1/(LC) * 1/2
	在谐振频率以下电容呈容性，谐振频率以上电容呈感性。
	因而一般大电容滤低频波，小电容滤高频波。
	这也能解释为什么同样容值的STM封装的电容滤波频率比DIP封装更高。
至于到底用多大的电容，这是一个参考的电容谐振频率:
	电容值 	DIP (MHz)  STM (MHz)
	1.0μF 	2.5 	   5
	0.1μF 	8 	   16
	0.01μF 	25 	   50
	1000pF  80 	   160
	100 pF  250	   500
	10 pF   800 	   1.6(GHz)
	不过仅仅是参考而已，用老工程师的话说——主要靠经验。
	更可靠的做法是将一大一小两个电容并联，
	一般要求相差两个数量级以上，以获得更大的滤波频段。
	一般来讲，大电容滤除低频波，小电容滤除高频波。电容值和你要滤除频率的平方成反比。
	具体电容的选择可以用公式 C = 4Pi*Pi /(R * f * f )

电源滤波电容如何选取:
	理论上理想的电容其阻抗随频率的增加而减少(1/jwc),
	但由于电容两端引脚的电感效应,这时电容应该看成是一个LC串连谐振电路,
	自谐振频率,即器件的SFR参数,
	当频率大于SFR值时,电容变成了一个电感,
	如果电容对地滤波,当频率超出SFR后,对干扰的抑制就大打折扣,所以需要一个较小的电容并联对地.
		原因在于小电容,SFR值大,对高频信号提供了一个对地通路,
	大电容虑低频,小电容虑高频,根本的原因在于SFR(自谐振频率)值不同,
	也可以理解为什么电源滤波中电容对地脚为什么要尽可能靠近地.因为分布电感小!!
实际的设计中,怎么知道电容的SFR是多少?就算我知道SFR值,如何选取不同SFR值的电容值呢?是选取一个电容还是两个电容?
	电容的SFR值和电容值有关,和电容的引脚电感有关,
	所以相同容值的0402,0603,或直插式电容的SFR值也不会相同,
	获取SFR值的途径有两个
		1)器件Data sheet,如22pf0402电容的SFR值在2G左右, 
		2)通过网络分析仪直接量测其自谐振频率,想想如何量测?S21?
知道了电容的SFR值后,用软件仿真,
	如RFsim99,选一个或两个电路在于你所供电电路的工作频带是否有足够的噪声抑制比.
	仿真完后,那就是实际电路试验,如调试手机接收灵敏度时,
	LNA的电源滤波是关键,好的电源滤波往往可以改善几个dB.
为什么在一个大的电容上还并联一个小电容
	因为大电容由于容量大，所以体积一般也比较大，且通常使用多层卷绕的方式制作
		（动手拆过铝电解电容应该会很有体会，没拆过的也可以拿几种不同的电容拆来看看），
	这就导致了大电容的分布电感比较大（也叫等效串联电感，英文简称ESL）。
	大家知道，电感对高频信号的阻抗是很大的，所以，大电容的高频性能不好。
	而一些小容量电容则刚刚相反，由于容量小，因此体积可以做得很小（缩短了引线，就减小了ESL，因为一段导线也可以看成是一个电感的），
	而且常使用平板电容的结构，这样小容量电容就有很小的ESL，这样它就具有了很好的高频性能，但由于容量小的缘故，对低频信号的阻抗大。
	如果我们为了让低频、高频信号都可以很好的通过，就采用一个大电容再并上一个小电容的方式。
	常使用的小电容为0.1uF的瓷片电容，当频率更高时，还可并联更小的电容，例如几pF、几百pF的。
	在数字电路中，一般要给每个芯片的电源引脚上并联一个0.1uF的电容到地
	因为在这些地方的信号主要是高频信号，使用较小的电容滤波就可以了。
电容的串并联容量公式-电容器的串并联分压公式
	串联公式：C = C1*C2/(C1 + C2) 2.并联公式C = C1+C2+C3
	串联分压比 V1 = C2/(C1 + C2)*V ........电容越大分得电压越小，交流直流条件下均如此 
	并联分流比 I1 = C1/(C1 + C2)*I ........电容越大通过的电流越大，当然，这是交流条件下
总结:
	理想的电容，其阻抗随频率升高而变小（R＝1/jwc）, 
	但理想的电容是不存在的，由于电容引脚的分布电感效应，在高频段电容不再是一个单纯的电容，
	更应该把它看成一个电容和电感的串联高频等效电路，
	当频率高于其谐振频率时，阻抗表现出随频率升高而升高的特性，就是电感特性，这时电容就好比一个电感。
	相反电感也有同样的特性。 
	大电容并联小电容在电源滤波中非常广泛的用到，根本原因就在于电容的自谐振特性。
	大小电容搭配可以很好的抑制低频到高频的电源干扰信号，
	小电容滤高频（自谐振频率高），大电容滤低频（自谐振频率低），两者互为补充。












